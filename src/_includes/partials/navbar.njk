<nav class="navbar" role="navigation" aria-label="Main Navigation">
    <div class="nav-container">
        <div class="nav-logo" style="display: flex; align-items: center; gap: 10px;">
            <a href="{{ '/' | url }}" class="brand" style="display: flex; align-items: center; gap: 8px; text-decoration: none;">
                <svg width="28" height="28" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <circle cx="16" cy="16" r="14" fill="var(--accent-color)"/>
                    <text x="16" y="21" text-anchor="middle" font-size="14" fill="#fff" font-family="Inter, Arial, sans-serif">N</text>
                </svg>
                <span style="font-weight: 700; font-size: 19px; color: var(--accent-color);">NANDA</span>
            </a>
        </div>
        <ul class="nav-menu">
            <li><a href="{{ '/' | url }}" class="nav-link" id="nav-home">Home</a></li>
            <li><a href="{{ '/#about' | url }}" class="nav-link" id="nav-about">About</a></li>
            <li><a href="{{ '/papers.html' | url }}" class="nav-link" id="nav-papers">Papers</a></li>
            <li><a href="{{ '/videos.html' | url }}" class="nav-link" id="nav-videos">Videos</a></li>
            <li><a href="{{ '/blog.html' | url }}" class="nav-link" id="nav-blog">Blog</a></li>
            <li><a href="{{ '/applications.html' | url }}" class="nav-link" id="nav-applications">Applications</a></li>
            <li><a href="{{ '/events.html' | url }}" class="nav-link" id="nav-events">Events</a></li>
        </ul>
        <div class="hamburger" aria-label="Open navigation menu" tabindex="0" role="button">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </div>
</nav>
<script>
// Client-side script for active link highlighting
// Needs to run after DOM is loaded and navbar is part of the page.
// It's assumed that script.js (loaded at end of body) will handle hamburger menu init.
// This script focuses only on the active class for nav links.
document.addEventListener('DOMContentLoaded', () => {
    const currentPath = window.location.pathname;
    const hash = window.location.hash;
    const siteBasePath = "{{ '/' | url }}"; // Eleventy's URL filter gives correct base path

    // Function to determine the effective path relative to the site base
    let effectivePath = currentPath;
    if (currentPath.startsWith(siteBasePath)) {
        effectivePath = currentPath.substring(siteBasePath.length);
    }
    // Ensure leading slash is consistent or removed for map lookup
    effectivePath = effectivePath.startsWith('/') ? effectivePath.substring(1) : effectivePath;
    if (effectivePath === '') effectivePath = 'index.html';


    const navMap = {
      'index.html': 'nav-home',
      'papers.html': 'nav-papers',
      'videos.html': 'nav-videos',
      'blog.html': 'nav-blog',
      'applications.html': 'nav-applications',
      'events.html': 'nav-events'
    };

    let activeId = navMap[effectivePath];

    if (!activeId && hash === '#about' && effectivePath === 'index.html') {
        activeId = 'nav-about';
    } else if (!activeId && effectivePath === 'index.html') {
        activeId = 'nav-home'; // Default to home if no other match on index page
    }

    const activeLink = document.getElementById(activeId);
    if (activeLink) {
        activeLink.classList.add('active');
    }
});
</script>
